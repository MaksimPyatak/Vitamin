(()=>{"use strict";document.querySelector("#file").addEventListener("change",(function(e){console.log(e.target.files[0]),document.querySelector(".add-file__info").innerHTML=e.target.files[0].name}));const e=document.forms.sign_up,t=(e.elements,new class{constructor(e){this.form=e}errorFilds=document.querySelectorAll(".error");emailRegExp=/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/;validation(e=this.form){let t=null;for(let n=0;n<e.elements.length;n++){const r=e.elements[n];let s=r.name+"Test";r.disabled?t++:"function"==typeof this[s]?t+=this[s](r):t++}return t===e.elements.length&&(console.log("Succses!"),!0)}blurValidation(e=this.form){for(let t=0;t<e.elements.length;t++){const n=e.elements[t];if("file"==n.name)break;n.addEventListener("blur",(e=>{"function"==typeof this[n.name+"Test"]&&this[n.name+"Test"](e.target)}))}}backgroundValdation(e=this.form){let t=0;for(let n=0;n<e.elements.length;n++){const r=e.elements[n];r.disabled?t++:"function"==typeof this[r.name+"ValidationForBtn"]?t+=this[r.name+"ValidationForBtn"](r)?1:0:t++}return t==e.elements.length}emailTest(e){if(0===e.value.length){const t="Email can't be blank";return this.isError(t,e),e.classList.add("input-error"),e.addEventListener("input",(t=>this[e.name+"Test"](e))),null}if(this.emailRegExp.test(e.value))return e.classList.remove("input-error"),this.removeError(e),1;{const t="Email is invalid";return this.isError(t,e),e.classList.add("input-error"),e.addEventListener("input",(t=>this[e.name+"Test"](e))),null}}emailValidationForBtn(e){return!!this.emailRegExp.test(e.value)}firstTest(e){if(0===e.value.length){const t="Fild can't be blank";return this.isError(t,e),e.classList.add("input-error"),e.addEventListener("input",(t=>this[e.name+"Test"](e))),null}if(e.value.length<3||e.value.length>15){const t="Fild must be at least 3 and no longer than 15 characters";return this.isError(t,e),e.classList.add("input-error"),e.addEventListener("input",(t=>this[e.name+"Test"](e))),null}return e.classList.remove("input-error"),this.removeError(e),1}firstValidationForBtn(e){return e.value.length>=3&&e.value.length<=15}lastTest(e){return this.firstTest(e)}lastValidationForBtn(e){return this.firstValidationForBtn(e)}passwordTest(e){if(0===e.value.length){const t="Password can't be blank";return this.isError(t,e),e.classList.add("input-error"),e.addEventListener("input",(t=>this[e.name+"Test"](e))),null}if(e.value.length<6||e.value.length>15){const t="Password must be at least 6 and no longer than 15 characters";return this.isError(t,e),e.classList.add("input-error"),e.addEventListener("input",(t=>this[e.name+"Test"](e))),null}return e.classList.remove("input-error"),this.removeError(e),1}passwordValidationForBtn(e){return e.value.length>=6&&e.value.length<=15}fileTest(e,t=this.form){let n,r=e.closest(".input-file-wrapper");if(t.contains(r)||(r=e),e.files.length&&(n=e.files[0].name.split(".").pop().toLowerCase()),0==e.files.length){const t="File must be attached";return this.isError(t,e),r.classList.add("input-error"),e.addEventListener("input",(t=>this[e.name+"Test"](e))),null}if(["jpg","jpeg","png","gif","bmp","pdf"].includes(n))return r.classList.remove("input-error"),this.removeError(e),1;{const t="File must be image or PDF";return this.isError(t,e),r.classList.add("input-error"),e.addEventListener("input",(t=>this[e.name+"Test"](e))),null}}fileValidationForBtn(e){let t;return e.files.length&&(t=e.files[0].name.split(".").pop().toLowerCase()),!(0===e.value.length||!["jpg","jpeg","png","gif","bmp","pdf"].includes(t))}isError(e,t){this.errorFilds.forEach((n=>{if(n.id=="error-"+t.name){let t=n.innerHTML;return n.innerHTML=e,t}}))}removeError(e){this.errorFilds.forEach((t=>{t.id=="error-"+e.name&&(t.innerHTML="")}))}}(e)),n=e.querySelector(".sign-up__submit");e.elements.file.disabled=!1,t.blurValidation();for(let t=0;t<e.elements.length;t++)e.elements[t].addEventListener("input",r);function r(){t.backgroundValdation()?n.classList.remove("no-active-button"):n.classList.add("no-active-button")}e.addEventListener("submit",(function(e){e.preventDefault(),t.validation()&&(n.classList.add("no-active-button"),n.disabled=!0,n.style.cursor="not-allowed",window.location.replace("subscriptions.html"))}))})();