(()=>{"use strict";const e=document.querySelectorAll(".select");function t(e,t){const n=window.innerHeight,s=e.clientHeight;n-e.getBoundingClientRect().top<s?e.classList.add(t):e.classList.remove(t)}function n(e,t){e.classList.remove(t)}console.log(document.forms[0].elements.state.value),e.forEach((function(e){const s="new-select__list--upwards",c=e,l=c.querySelectorAll("option"),i=l.length;c.style.display="none";const a=document.createElement("div");a.classList.add("select"),c.parentNode.insertBefore(a,c),a.appendChild(c);const o=document.createElement("div");o.classList.add("new-select"),c.insertAdjacentElement("afterend",o);const d=document.createElement("div");d.classList.add("new-select__header"),d.textContent=c.querySelector("option:disabled").textContent,o.setAttribute("tabindex","0"),o.appendChild(d);const r=document.createElement("div");r.classList.add("new-select__list"),d.insertAdjacentElement("afterend",r),d.innerHTML=`\n       <span class="new-select__arrow arrow"></span>\n       ${d.innerHTML}\n   `;for(let e=1;e<i;e++){const t=document.createElement("div");t.classList.add("new-select__item");const n=document.createElement("span");n.textContent=l[e].textContent,t.appendChild(n),t.setAttribute("data-value",l[e].value),r.appendChild(t)}const m=r.querySelectorAll(".new-select__item");r.style.display="none";let v=!1;d.addEventListener("click",(()=>{v||L()})),o.addEventListener("focus",(e=>{v=!v,L(),window.setTimeout((()=>v=!1),100)})),o.addEventListener("blur",(()=>{v=!1,d.classList.remove("on"),r.style.display="none",_(m,"new-select__item--active"),t(r,s)}));const u=function(e){o.contains(e.target)||(r.style.display="none",d.classList.remove("on"),document.removeEventListener("click",u),p=void 0)};function _(e,t){p=void 0;for(let n=0;n<e.length;n++)e[n].classList.remove(t)}function L(){if(d.classList.contains("on"))d.classList.remove("on"),r.style.display="none",n(r,s),_(m,"new-select__item--active");else{function e(e){let t=e.getAttribute("data-value");c.value=t,d.innerHTML=` <span class="new-select__arrow arrow"></span>   ${e.querySelector("span").textContent}`,r.style.display="none",d.classList.remove("on"),_(m,"new-select__item--active"),n(r,s),document.removeEventListener("click",u)}function l(t){if("Enter"===t.key&&"block"===r.style.display){t.preventDefault();for(let t=0;t<m.length;t++){const n=m[t];n.classList.contains("new-select__item--active")&&e(n)}}}d.classList.add("on"),r.style.display="block",document.removeEventListener("keydown",w),document.addEventListener("keydown",w),t(r,s),document.addEventListener("keydown",l),document.addEventListener("click",u),m.forEach((function(t){t.addEventListener("click",(()=>e(t)))}))}}function w(e){"ArrowDown"!==e.key||document.activeElement!=(o||d)&&document.activeElement.parentElement!==r?"ArrowUp"!==e.key||document.activeElement!=(o||d)&&document.activeElement.parentElement!==r||(e.preventDefault(),void 0===p?(p=m.length-1,m[p].classList.add("new-select__item--active")):p>0?(m[p].classList.remove("new-select__item--active"),p--,m[p].classList.add("new-select__item--active")):(m[p].classList.remove("new-select__item--active"),p=m.length-1,m[p].classList.add("new-select__item--active"))):(e.preventDefault(),null==p?(p=0,m[p].classList.add("new-select__item--active")):p<m.length-1?(m[p].classList.remove("new-select__item--active"),p++,m[p].classList.add("new-select__item--active")):(m[p].classList.remove("new-select__item--active"),p=0,m[p].classList.add("new-select__item--active")))}let p}))})();