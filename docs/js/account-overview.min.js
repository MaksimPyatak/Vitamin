(()=>{"use strict";const e=document.querySelectorAll(".select");function t(e,t){const n=window.innerHeight,s=e.clientHeight;n-e.getBoundingClientRect().top<s?e.classList.add(t):e.classList.remove(t)}function n(e,t){e.classList.remove(t)}e.forEach((function(s){const r="new-select__list--upwards",i=s,l=i.querySelectorAll("option"),a=l.length;i.style.display="none";const o=document.createElement("div");o.classList.add("select"),i.parentNode.insertBefore(o,i),o.appendChild(i);const c=document.createElement("div");c.classList.add("new-select"),i.insertAdjacentElement("afterend",c);const d=document.createElement("div");d.classList.add("new-select__header"),d.textContent=i.querySelector("option:disabled").textContent,c.setAttribute("tabindex","0"),c.appendChild(d);const u=document.createElement("div");u.classList.add("new-select__list"),d.insertAdjacentElement("afterend",u),d.innerHTML=`\n       <span class="new-select__arrow arrow"></span>\n       ${d.innerHTML}\n   `;for(let e=1;e<a;e++){const t=document.createElement("div");t.classList.add("new-select__item");const n=document.createElement("span");n.textContent=l[e].textContent,t.appendChild(n),t.setAttribute("data-value",l[e].value),u.appendChild(t)}const m=u.querySelectorAll(".new-select__item");u.style.display="none";let v=!1;c.addEventListener("click",(e=>{v||L()})),c.addEventListener("focus",(e=>{v=!v,L(),window.setTimeout((()=>v=!1),200)})),c.addEventListener("blur",(n=>{v=!1,d.classList.remove("on"),u.style.display="none";const s=new Event("blur",{bubbles:!0});e[0].dispatchEvent(s),p(m,"new-select__item--active"),t(u,r)}));const h=function(e){c.contains(e.target)||(u.style.display="none",d.classList.remove("on"),document.removeEventListener("click",h),E=void 0)};function p(e,t){E=void 0;for(let n=0;n<e.length;n++)e[n].classList.remove(t)}function L(){if(d.classList.contains("on"))d.classList.remove("on"),u.style.display="none",n(u,r),p(m,"new-select__item--active"),m.forEach((function(e){e.removeEventListener("click",(()=>actionsAfterSelectingOption(e)))}));else{function e(e){let t=e.getAttribute("data-value");i.value=t;const s=new Event("change",{bubbles:!0});i.dispatchEvent(s),d.innerHTML=` <span class="new-select__arrow arrow"></span>   ${e.querySelector("span").textContent}`,u.style.display="none",d.classList.remove("on"),p(m,"new-select__item--active"),n(u,r),document.removeEventListener("click",h),v=!0,window.setTimeout((()=>v=!1),200)}function s(t){if("Enter"===t.key&&"block"===u.style.display){t.preventDefault();for(let t=0;t<m.length;t++){const n=m[t];n.classList.contains("new-select__item--active")&&e(n)}}}d.classList.add("on"),u.style.display="block",document.removeEventListener("keydown",f),document.addEventListener("keydown",f),t(u,r),document.addEventListener("keydown",s),document.addEventListener("click",h),m.forEach((function(t){t.addEventListener("click",(()=>e(t)))}))}}function f(e){"ArrowDown"!==e.key||document.activeElement!=c&&document.activeElement.parentElement!==u?"ArrowUp"!==e.key||document.activeElement!=c&&document.activeElement.parentElement!==u||(e.preventDefault(),void 0===E?(E=m.length-1,m[E].classList.add("new-select__item--active")):E>0?(m[E].classList.remove("new-select__item--active"),E--,m[E].classList.add("new-select__item--active")):(m[E].classList.remove("new-select__item--active"),E=m.length-1,m[E].classList.add("new-select__item--active"))):(e.preventDefault(),null==E?(E=0,m[E].classList.add("new-select__item--active")):E<m.length-1?(m[E].classList.remove("new-select__item--active"),E++,m[E].classList.add("new-select__item--active")):(m[E].classList.remove("new-select__item--active"),E=0,m[E].classList.add("new-select__item--active")))}let E}));const s=document.forms.overview,r=s.elements,i=r.zip,l=r.phone,a=new class{constructor(e){this.form=e}errorFilds=document.querySelectorAll(".error");emailRegExp=/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/;addressRegExp=/^[а-я\s.]+?\d+/i;validation(e=this.form){let t=null;for(let n=0;n<e.elements.length;n++){const s=e.elements[n];let r=s.name+"Test";s.disabled?t++:"function"==typeof this[r]?t+=this[r](s):t++}return t===e.elements.length&&(console.log("Succses!"),!0)}blurValidation(e=this.form){for(let t=0;t<e.elements.length;t++){const n=e.elements[t];if("file"==n.name)break;n.addEventListener("blur",(e=>{"function"==typeof this[n.name+"Test"]&&this[n.name+"Test"](e.target)}))}}backgroundValdation(e=this.form){let t=0;for(let n=0;n<e.elements.length;n++){const s=e.elements[n];s.disabled?t++:"function"==typeof this[s.name+"ValidationForBtn"]?t+=this[s.name+"ValidationForBtn"](s)?1:0:t++}return t==e.elements.length}emailTest(e){if(0===e.value.length){const t="Email can't be blank";return this.isError(t,e),e.classList.add("input-error"),e.addEventListener("input",(t=>this[e.name+"Test"](e))),null}if(this.emailRegExp.test(e.value))return e.classList.remove("input-error"),this.removeError(e),1;{const t="Email is invalid";return this.isError(t,e),e.classList.add("input-error"),e.addEventListener("input",(t=>this[e.name+"Test"](e))),null}}emailValidationForBtn(e){return!!this.emailRegExp.test(e.value)}firstTest(e){if(0===e.value.length){const t="Field can't be blank";return this.isError(t,e),e.classList.add("input-error"),e.addEventListener("input",(t=>this[e.name+"Test"](e))),null}if(e.value.length<3||e.value.length>15){const t="Field must be at least 3 and no longer than 15 characters";return this.isError(t,e),e.classList.add("input-error"),e.addEventListener("input",(t=>this[e.name+"Test"](e))),null}return e.classList.remove("input-error"),this.removeError(e),1}firstValidationForBtn(e){return e.value.length>=3&&e.value.length<=15}lastTest(e){return this.firstTest(e)}lastValidationForBtn(e){return this.firstValidationForBtn(e)}passwordTest(e){if(0===e.value.length){const t="Password can't be blank";return this.isError(t,e),e.classList.add("input-error"),e.addEventListener("input",(t=>this[e.name+"Test"](e))),null}if(e.value.length<6||e.value.length>15){const t="Password must be at least 6 and no longer than 15 characters";return this.isError(t,e),e.classList.add("input-error"),e.addEventListener("input",(t=>this[e.name+"Test"](e))),null}return e.classList.remove("input-error"),this.removeError(e),1}passwordValidationForBtn(e){return e.value.length>=6&&e.value.length<=15}first_addressTest(e){if(0===e.value.length){const t="Field can't be blank";return this.isError(t,e),e.classList.add("input-error"),e.addEventListener("input",(t=>this[e.name+"Test"](e))),null}if(e.value.length<2){const t="Field must be at least 2 characters";return this.isError(t,e),e.classList.add("input-error"),e.addEventListener("input",(t=>this[e.name+"Test"](e))),null}return e.classList.remove("input-error"),this.removeError(e),1}first_addressValidationForBtn(e){return e.value.length>=2&&e.value.length<=15}cityTest(e){if(0===e.value.length){const t="Field can't be blank";return this.isError(t,e),e.classList.add("input-error"),e.addEventListener("input",(t=>this[e.name+"Test"](e))),null}if(e.value.length<2||e.value.length>15){const t="Field must be at least 2 and no longer than 15 characters";return this.isError(t,e),e.classList.add("input-error"),e.addEventListener("input",(t=>this[e.name+"Test"](e))),null}return e.classList.remove("input-error"),this.removeError(e),1}cityValidationForBtn(e){return e.value.length>=2&&e.value.length<=15}stateTest(e){const t=this.#e(e,"new-select__header");if(""===e.value){const n="Select from the list";return this.isError(n,e),t&&t.classList.add("input-error"),e.addEventListener("change",(t=>this[e.name+"Test"](e))),null}return t&&(console.log("error"),t.classList.remove("input-error")),this.removeError(e),1}stateValidationForBtn(e){return null===!e.value}zipTest(e){if(0===e.value.length){const t="Field can't be blank";return this.isError(t,e),e.classList.add("input-error"),e.addEventListener("input",(t=>this[e.name+"Test"](e))),null}if(e.value.length<7){const t="The field must contain 6 digits";return this.isError(t,e),e.classList.add("input-error"),e.addEventListener("input",(t=>this[e.name+"Test"](e))),null}return e.classList.remove("input-error"),this.removeError(e),1}zipValidationForBtn(e){return 7===!e.value}phoneTest(e){if(0===e.value.length){const t="Field can't be blank";return this.isError(t,e),e.classList.add("input-error"),e.addEventListener("input",(t=>this[e.name+"Test"](e))),null}if(e.value.length<15){const t="The field must contain 11 digits";return this.isError(t,e),e.classList.add("input-error"),e.addEventListener("input",(t=>this[e.name+"Test"](e))),null}return e.classList.remove("input-error"),this.removeError(e),1}phoneValidationForBtn(e){return 15===!e.value}fileTest(e,t=this.form){let n,s=e.closest(".input-file-wrapper");if(t.contains(s)||(s=e),e.files.length&&(n=e.files[0].name.split(".").pop().toLowerCase()),0==e.files.length){const t="File must be attached";return this.isError(t,e),s.classList.add("input-error"),e.addEventListener("input",(t=>this[e.name+"Test"](e))),null}if(["jpg","jpeg","png","gif","bmp","pdf"].includes(n))return s.classList.remove("input-error"),this.removeError(e),1;{const t="File must be image or PDF";return this.isError(t,e),s.classList.add("input-error"),e.addEventListener("input",(t=>this[e.name+"Test"](e))),null}}fileValidationForBtn(e){let t;return e.files.length&&(t=e.files[0].name.split(".").pop().toLowerCase()),!(0===e.value.length||!["jpg","jpeg","png","gif","bmp","pdf"].includes(t))}isError(e,t){this.errorFilds.forEach((n=>{if(n.id=="error-"+t.name){let t=n.innerHTML;return n.innerHTML=e,t}}))}removeError(e){this.errorFilds.forEach((t=>{t.id=="error-"+e.name&&(t.innerHTML="")}))}#e(e,t){let n=e.parentElement.getElementsByClassName(t);return n?n[0]:void 0}}(s),o=s.querySelector(".form__submit");document.querySelector("body"),a.blurValidation(),i.addEventListener("input",(function(){const e=this.value.replace(/\D/g,""),t=e.slice(0,3),n=e.slice(3,6),s=n.length>0?`${t} ${n}`:t;this.value=s})),l.addEventListener("input",(function(){const e=this.value.replace(/\D/g,""),t=e.slice(0,1),n=e.slice(1,4),s=e.slice(4,7),r=e.slice(7,9),i=e.slice(9,11);let l=`${t}`;n.length>0&&(l+=` ${n}`),s.length>0&&(l+=` ${s}`),r.length>0&&(l+=` ${r}`),i.length>0&&(l+=` ${i}`),this.value=l}));for(let e=0;e<s.elements.length;e++)s.elements[e].addEventListener("input",c);function c(){a.backgroundValdation()?o.classListNaNpxove("no-active-button"):o.classList.add("no-active-button")}s.addEventListener("submit",(function(e){e.preventDefault(),a.validation()&&console.log("valid")}))})();